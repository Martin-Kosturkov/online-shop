version: "3"
services:
    store-db:
        image: postgres:14-alpine
        container_name: store-db
        ports:
            - "5432:5432"
        environment:
            - POSTGRES_USER=postgres
            - POSTGRES_PASSWORD=postgres
            - POSTGRES_DB=store
    shop-db:
        image: postgres:14-alpine
        container_name: shop-db
        ports:
            - "5433:5432"
        environment:
            - POSTGRES_USER=postgres
            - POSTGRES_PASSWORD=postgres
            - POSTGRES_DB=shop
    zookeeper-server:
        image: bitnami/zookeeper:3.7
        container_name: zookeeper-server
        ports:
            - "2181:2181"
        environment:
            - ALLOW_ANONYMOUS_LOGIN=yes
    kafka-server:
        image: bitnami/kafka:3
        container_name: kafka-server
        depends_on:
            - zookeeper-server
        ports:
            - "9092:9092"
        environment:
            - ALLOW_PLAINTEXT_LISTENER=yes
            - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper-server:2181